# Cloud Provider Choice

This `md` file contains the assessment for the last task of the technical test.

As you may be aware, I decided to go with Google Cloud Platform to deploy this application. The two contenders were AWS and GCP. In my opinion, each one of the providers has its own list of pros and cons. But is difficult to evaluate which cloud provider fits more without knowing how works internally an organization. 

Companies with different objectives have different needs. A startup probably needs to iterate faster, they need to be focus on the product and try to reduce the operational time, or sometimes they just have a constrained budget. Is not the same if you have a data-oriented product or if your company is implementing IoT software. Usually, cloud providers are stronger in certain areas. As an example, we could say that GCP has a stronger offering in Big Data and AI products than AWS. On the other hand, AWS provides more flexible services for Compute, with stronger serverless background, and they have more global support. Then making a call of which cloud provider to use only based on some application is a bit complex

That being said, I will try to explain why I decided to move with GCP in front of AWS, taking into consideration what I know about MoonPay.

* No-Ops vs Ops: I think that the biggest difference between the two providers is the learning curve to start working with the provider. Google puts a lot of effort to create managed services that are easy to use and implement, reducing the operational time to manage a complex infrastructure. Products as Cloud Functions or Cloud Run, have been designed to been manage without operational overhead. Some services are designed to be fully scalable without any extra effort, resulting in operations teams having time back to focus on other aspects as observability or governance.
AWS gives more freedom on how to implement things, fewer constraints but more complex to manage. Manage services as Fargate (Cloud Run equivalent) are not easy to set up for a non-ops team. That means that for AWS you need a full dedicated DevOps team to set up and manage the infrastructure. 

* Organization scalability: GCP has better organization scalability, which allows iterate from a single project to multiple projects easily. Organizations in GCP are great, they give you control over complex organization structures. AWS organizations have been implemented lately, and they look like a patch on top of AWS to start having control in environments multi-account. Service control policies are great, but GCP has an equivalent and on top, the VPC Service Controls could help to have a more secure environment.

* Pricing: GCP is around 25% cheaper than AWS, depending on the service. The two providers offer an always-free tier, but GCP has better pricing in manage services one example is Secrets. GCP perhaps has one extra discount that is called Sustained Use Discounts, you will get up to 30% if you have a compute instance running more than 25% of the month. GCP offers billing per second all the way around, meanwhile, AWS only supports it in some instances/services.

* Global Network: I think that this is for me the best point of GCP. They have their own Global Network, which is ideal for low latency services. Subnets can be spawn in several availability zones and create a global plain network for your services quite easily. Networks have a better implementation in GCP than in AWS. AWS communication between regions can be more tricky than on GCP.

* Container Services: AWS has been always late in the implementation of container technologies. Services like AWS ECS, have been available forever but the user experience and management are not great. Is a service that is not straightforward to manage. Again, you need ops people to have an initial setup of the tool. Cloud Run, the equivalent is just quite easy to use in front of ECS, developer experience is great, and whoever can just pop up a container image and just have the service up and running. 
And if we talk about Kubernetes, basically there is no comparison between EKS and GKE. GKE is a much mature Kubernetes manage service in front of EKS. The two services are ops-oriented, but GKE is much more mature compared with EKS, and the entry-level to deploy a cluster is much lower than EKS. In EKS, you need to have some knowledge of k8s internals. Google is the creators of Kubernetes and you can see how much effort they have put to create this managed service. 

* Machine learning, AI, and Big Data: The Google offering in this part is quite much powerful than AWS equivalents. Services as Big Data or Big Table are really powerful and easy to set up compared with Redshift. Big Query is a fully managed service that doesn't require any ops investment. Also, on GCP you have the Tensorflow Process Units, which can be integrated with services as GKE. TPUs are great for machine learning and AI. 

I look like a salesman from GCP. But to be honest, AWS has also other benefits in front of GCP. First of all, is a much mature cloud provider. Some services have been around for 10 years, and you can feel how mature is the product when you are using it. Sometimes GCP has some caveat on how a service is behaving, a lot of their endpoints are on beta or alpha state, translated in a lack of SLA depending on the service. AWS IAM resource management is much better implemented than IAM on GCP. Rules are more flexible and give you more freedom when writing policies. AWS has more features and services than GCP, and they are stronger in the mobile and IoT market than AWS. As an example, they have their own Kafka implementation with Kinesis and they introduced satellite services. Also, they are the only cloud provider providing Mac infrastructure for IOS builds or services as Mobile Analytics, a managed service that provides metrics for mobile applications based in Kinesis. 

Then as has been said, picking up cloud providers is a big discussion. To be honest, I think that the future in cloud computing goes on the multi-cloud environment. These days, there are a lot of companies that have data services in GCP and compute services in AWS, or mobile products in AWS and container infrastructure in GCP. Everything comes to have a nice strategy and a nice initial design to be able to scale up and have multiple cloud providers. 


Going back to this assessment. I decided to move with GCP and Cloud Run as I didn't have much background to make the call. I wanted something reliable, scalable, and easy to set up, and Cloud Run fits on that description. In a real production scenario, things will be different. Probably to cover all your needs, you need a more complex infrastructure like Kubernetes. 
I didn't want to have a traditional deployment using EC2/GCE instances, as you will need some kind of configuration management to have a fully working deploy. Cloud Run exposes your application without any extra element as an LB (the LB is provisioned but not managed by the users). For the database, I decided to go with Cloud SQL as it has support for Postgres and is a fully managed service as RDS. Also, Cloud SQL can be exposed as a socket into a container that runs in Cloud Run. To be honest I didn't have time to do this configuration but is something cool that could be used to improve latency between the backend and the database.